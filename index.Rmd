---
title: "Computational Musicology"
author: "Bente Klein Hazebroek"
date: "February 2019"
output: 
    flexdashboard::flex_dashboard:
      orientation: rows
      vertical_layout: scroll
      storyboard: true
---

```{r}
library(tidyverse)
library(spotifyr)
library(flexdashboard)
library(plotly)
library(Cairo)
library(shiny)
library(dplyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '7695c57a82654e18ae7990e714b60c38')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'fac65dcc16154cbeb79e71ef5dbd9465')
load(file="BOTHPLAYLISTS.RData")
```

My Corpus {.tabset}
================================================================

Row {data-width=300}
----------------------------------------------------------------

### Introduction {data-width=300}
I am looking at Spotify's 'Coffeehouse' and 'On the Road' playlists. A coffeehouse is a pleasant place where you can talk, work or read while enjoying a cup of coffee; you will probably listen to easy, mellow songs here. But, when you're on the road, you have to kill time while going from A to B (whether you're alone or with friends; you go to work or are on a holiday). Since the car is a private place, you might listen to uplifting, sing-along songs. So, what are the characteristics of these playlists and in what ways do they differ? 

### Data {data-width=700}

I am using the following playlists for this research, composed by Spotify and Digster Nederland:

  **Coffeehouse:**
  
    1. Coffeehouse - Feel the vibe of the Coffeehouse playlist, full of relaxing singer-songwriter an pop music.    
    2. 't Koffiehuis - 'n Bakkie en gemoedelijke muziek op de achtergrond.    
    3. Your Favorite Coffeehouse - Curl up in your favorite spot with some sweet, mellow tunes...
  
 **On the Road:**
 
    1. Classic Road Trip Songs - The ultimate playlist to fuel your good mood while on the road.
    2. Onderweg - Met deze playlist heb je altijd de beste hits bij de hand voor onderweg.
    3. Road Trip - Go on a weekend getaway with your barkada and your favorite hits!
    
Row
---------------------------------------------------------------

This results in a total of 281 Coffeehouse songs and 168 On the Road songs.

```{r, echo=FALSE}
plot_mode_key <- ggplot(BOTHPLAYLISTS, aes(x=mode, fill=key)) + geom_bar() + facet_wrap(~playlist_name)

ggplotly(plot_mode_key)
```

Findings {.tabset}
=================================================================

Track popularity
-----------------------------------------------------------------
### Track popularity
The Coffeehouse playlists have a mean track popularity of 52.38 (SD = 25.751), whereas the On the Road playlists have a higher mean track popularity of 61.68 (SD = 29.766). This makes sense, since the On the Road playlists contain more songs that everyone can sing along to, and are thus familiar to a large audience. 

Energy
-----------------------------------------------------------------
### Energy
I expect that energy of the On the Road playlists is much higher than for Coffehouse playlists. While on the road, you need to stay awake, so most songs have a loud beat. Coffeehouse songs, on the other hand, sound more quiet and peaceful. Spotify measured that the average energy in On the Road songs is 0.6131 (SD = 0.295) and 0.3596 (SD = 0.262) in Coffehouse songs. Indeed, energy seems to be much higher in On the Road playlists. 

Danceability
-----------------------------------------------------------------
### Danceability

Since the energy is higher in On the Road playlists, I thought danceability would be higher as well. There is indeed a difference, but this difference is smaller than I thought it would be: 0.6051 (SD = 0.191) On the Road vs  0.5495 (SD = 0.237) Coffeehouse. Energy  does not seem to play a role in the danceability of songs, so I'm not sure what danceability is based on then.

Acousticness
-----------------------------------------------------------------
### Acousticness

Characteristic for mellow Coffeehouse songs is their high acousticness (0.6589, SD = 0.347). The playlists contain mostly easy, soft songs that are accompanied by piano or guitar without much of electronic sounds. The acousticness of these playlists is thus, as expected, much higher than for On the Road playlists (0.2932, SD = 0.353). 

Valence
-----------------------------------------------------------------
### Valence

I experience the On the Road playlists to be happier than Coffeehouse playlists, since these songs sound more uplifting to me. Spotify has generated a measure for valence: the higher the valence value, the happier the song. According to this measure, On the Road playlists are happier (0.4709, SD = 0.304) than Coffeehouse playlists (0.3555, SD = 0.3165).

Tempo and loudness
-----------------------------------------------------------------
### Tempo and loudness

A coffeehouse is a place to quietly drink coffee, so you will not hear loud and fast music there, but On the Road songs are more uplifting (so probably faster and louder). The tempo and loudness of On the Road songs (tempo: 122.07, SD = 40.042; loudness: -7.423, SD = 5.120) are indeed higer than Coffeehouse songs (tempo: 115.25, SD = 52.971; loudness:-10.845, SD = 9.068), but against my expectations, the difference is not really big. This is probably because the tempo and loudness of songs within the playlists differ too much, looking at the high standard deviations.

Energy vs acousticness {.tabset}
==================================================================
So, high *energy* is characteristic for Road Trip songs, whereas high *acousticness* is characteristic for Coffeehouse songs. I decided to plot energy and acousticness for both playlists, to see a clear difference. These figures indeed show mostly high acoustiness and low energy in Coffeehouse, and high energy and low acousticness in On the Road. Valence is added to show that songs with high energy and low acoustiness are happiest. 

```{r}
plot_both_acousticenergy <- ggplot(BOTHPLAYLISTS, aes(x=energy, y=acousticness, col=valence)) + geom_point(size=4, alpha=0.6) + geom_smooth(se=FALSE, col = "black", size=1.5) + facet_wrap(~playlist_name)
```

```{r, echo=FALSE}
ggplotly(plot_both_acousticenergy, height=375)
```

Chromagram {.tabset}
==================================================================
I created a chromagram for Walk of Life (Dire Strates), found in an On the Road playlist. This seems to be the song with most energy (0.960) and has low acousticness (0.356). According to Spotify, it is one of the least popular songs (16 in a range from 12-100), although I think everone knows this song. Walk of Life is marked with quite high valence (0.7720) and tempo (172.377).

*I tried to create a chromagram, but I kept getting error messages when running the code. I will try again later this week.*

Conclusion {.tabset}
==================================================================
